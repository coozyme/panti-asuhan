<%- include('../../partials/header.ejs') -%>
   <div class="main-content">

      <div class="page-content">
         <div class="container-fluid">

            <!-- start page title -->
            <div class="page-title-box">
               <div class="row align-items-center">
                  <div class="col-md-8">
                     <h6 class="page-title">Data Donasi</h6>
                  </div>
                  <div class="col-md-4">
                     <div class="float-end d-none d-md-block">
                        <button type="button" class="btn btn-primary waves-effect waves-light" data-bs-toggle="modal"
                           data-bs-target=".bs-example-modal-center">
                           <i class="fas fa-print"></i> Cetak</button>
                        <button type="button" class="btn btn-primary waves-effect waves-light" data-bs-toggle="modal"
                           data-bs-target=".bs-example-modal-center">
                           <i class="fas fa-plus"></i> Tambah</button>
                        <%- include('./popup-add-donasi.ejs') -%>
                     </div>
                  </div>
               </div>
            </div>
            <!-- end page title -->



            <div class="row">
               <div class="col-12">
                  <div class="card">
                     <div class="card-body">

                        <h4 class="card-title">List Donasi</h4>

                        <div class="table-responsive">
                           <table class="table table-editable table-nowrap align-middle table-edits">
                              <thead>
                                 <tr>
                                    <th>Nomor</th>
                                    <th>Donatur</th>
                                    <th>Jumlah</th>
                                    <th>Metode</th>
                                    <th>Status</th>
                                    <th>Tanggal Donasi</th>
                                    <th>Tanggal Verifikasi</th>
                                    <th>Action</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <% for(var i=0; i < data.length; i++) { %>
                                    <tr data-id="1">
                                       <td data-field="nomor" style="width: 80px">
                                          <%= i + 1 %>
                                       </td>
                                       <td data-field="donatur">
                                          <%=data[i].donatur%>
                                       </td>
                                       <td data-field="total">
                                          <%=data[i].jumlah%>
                                       </td>
                                       <td data-field="metode">
                                          <%=data[i].metode%>
                                       </td>
                                       <td data-field="status">
                                          <%=data[i].status_verifikasi%>
                                       </td>
                                       <td data-field="date-donation">
                                          <%=data[i].tanggal_submit%>
                                       </td>
                                       <td data-field="date-verif">
                                          <%=data[i].tanggal_verifikasi%>
                                       </td>
                                       <td style="width: 100px">
                                          <a class="btn btn-primary waves-effect waves-light" data-bs-toggle="modal"
                                             data-bs-target="#detail<%= data[i].id %>id">
                                             <i class="fas fa-eye"></i>
                                          </a>
                                          <%- include('./popup-detail-donasi.ejs', {detail: data[i], idx: i}) -%>
                                             <a class="btn btn-warning waves-effect waves-ligh" title="Edit"
                                                data-bs-toggle="modal" data-bs-target="#edit<%= data[i].id %>id">
                                                <i class="fas fa-pencil-alt"></i>
                                             </a>
                                             <%- include('./popup-edit-donasi.ejs', {edit: data[i], idx: i}) -%>

                                       </td>
                                    </tr>
                                    <% } %>
                              </tbody>
                              <!-- end tbody -->
                           </table>
                           <!-- end table -->
                        </div>
                        <!-- end -->
                     </div>
                  </div>
               </div> <!-- end col -->
            </div> <!-- end row -->
            <% if (true) { %>
               <script>
                  document.addEventListener('DOMContentLoaded', function () {
                     let timerInterval;
                     Swal.fire({
                        title: 'Success!',
                        html: 'I will close in <strong></strong> seconds.',
                        text: 'OKKK',
                        icon: 'success',
                        timer: 2000,
                        confirmButtonColor: "#556ee6",
                        onBeforeOpen: function () {
                           Swal.showLoading();
                           timerInterval = setInterval(function () {
                              const content = Swal.getContent();
                              if (content) {
                                 const strong = content.querySelector('strong');
                                 if (strong) {
                                    strong.textContent = Math.ceil(Swal.getTimerLeft() / 1000);
                                 }
                              }
                           }, 100);
                        },
                        onClose: function () {
                           clearInterval(timerInterval);
                        }
                     }).then(function (result) {
                        if (result.dismiss === Swal.DismissReason.timer) {
                           console.log('I was closed by the timer');
                        }
                     });
                  });
               </script>
               <% } %>
         </div> <!-- container-fluid -->
      </div>
      <!-- End Page-content -->

   </div>
   <%- include('../../partials/footer.ejs') -%>