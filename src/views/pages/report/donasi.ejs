<%- include('../../partials/header.ejs', {session: session}) -%>
   <div class="main-content">

      <div class="page-content">
         <div class="container-fluid">

            <!-- start page title -->
            <div class="page-title-box">
               <div class="row align-items-center">
                  <div class="col-md-8">
                     <h6 class="page-title">Data Donasi</h6>
                  </div>
                  <div class="col-md-4">
                     <div class="float-end d-none d-md-block">
                        <!-- <button type="button" class="btn btn-primary waves-effect waves-light" data-bs-toggle="modal"
                           data-bs-target=".bs-example-modal-center">
                           <i class="fas fa-print"></i> Cetak</button>
                        <% if (session.userType==='ADMINISTRATOR' ) { %>
                           <button type="button" class="btn btn-primary waves-effect waves-light" data-bs-toggle="modal"
                              data-bs-target=".bs-example-modal-center">
                              <i class="fas fa-plus"></i> Tambah</button>
                           <% } %> -->
                     </div>
                  </div>
               </div>
            </div>
            <!-- end page title -->



            <div class="row">
               <div class="col-12">

                  <div class="card">
                     <div class="card-body">

                        <h4 class="card-title">Laporan Donasi</h4>

                        <div class="table-responsive">
                           <table class="table table-editable table-nowrap align-middle table-edits">
                              <thead>
                                 <tr>
                                    <th>Nomor</th>
                                    <th>Nama Campaign</th>
                                    <th>Target Donasi</th>
                                    <th>Dana Terkumpul</th>
                                    <th>Total Pengeluaran</th>
                                    <th>Sisa Dana</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <% if (dataAggregation.length> 0) { %>
                                    <% dataAggregation.map((dt, idx)=> { %>
                                       <tr data-id="1">
                                          <td data-field="nomor" style="width: 80px">
                                             <%= idx+1 %>
                                          </td>
                                          <td data-field="donatur">
                                             <%= dt.namaCampaign %>
                                          </td>
                                          <td data-field="total">
                                             <%= dt.targetDonasi %>
                                          </td>
                                          <td data-field="method">
                                             <%= dt.terkumpul %>
                                          </td>
                                          <td data-field="status">
                                             <%= dt.totalPengeluaran %>
                                          </td>
                                          <td data-field="status">
                                             <%= dt.sisaDana %>
                                          </td>
                                       </tr>
                                       <% }) %>
                                          <% } %>

                              </tbody>
                              <!-- end tbody -->
                           </table>
                           <!-- end table -->
                        </div>
                        <!-- end -->
                     </div>
                  </div>
               </div> <!-- end col -->
            </div> <!-- end row -->

         </div> <!-- container-fluid -->
      </div>
      <!-- End Page-content -->

   </div>

   <script>
      async function filterDonasiReport(id) {
         try {
            await fetch(`/laporan/pengeluaran/${id}`, { method: 'DELETE' });

            // showFloatingAlert('success_delete');
            // setTimeout(() => {
            //    window.location.reload();
            // }, 500);
         } catch (err) {
            // console.error('Delete failed:', err);
            // showFloatingAlert('failed_delete');
         }
      }
   </script>
   <%- include('../../partials/footer.ejs') -%>